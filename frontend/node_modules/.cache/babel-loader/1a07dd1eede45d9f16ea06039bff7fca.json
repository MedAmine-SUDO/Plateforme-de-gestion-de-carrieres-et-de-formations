{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst react_1 = require(\"react\");\n\nexports.default = ({\n  globalLogin,\n  globalLogout,\n  setSession,\n  removeSession,\n  storage\n}) => {\n  /**\n   * Global logout/login\n   */\n  react_1.useEffect(() => {\n    const logoutEvent = event => {\n      if (globalLogout && event.key === \"logout\") {\n        removeSession();\n      }\n\n      if (globalLogin && event.key === \"login\") {\n        setSession(storage.get());\n      }\n    };\n\n    window.addEventListener(\"storage\", logoutEvent);\n    return () => {\n      window.localStorage.removeItem(\"logout\");\n      window.localStorage.removeItem(\"login\");\n      window.removeEventListener(\"storage\", logoutEvent);\n    };\n  }, [globalLogout, globalLogin]);\n};","map":{"version":3,"sources":["../../src/utils/useGlobalEvents.ts"],"names":[],"mappings":";;;;;;AAAA,MAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AAIA,OAAA,CAAA,OAAA,GAAe,CAAW;AACxB,EAAA,WADwB;AAExB,EAAA,YAFwB;AAGxB,EAAA,UAHwB;AAIxB,EAAA,aAJwB;AAKxB,EAAA;AALwB,CAAX,KAMY;AACzB;;;AAGA,EAAA,OAAA,CAAA,SAAA,CAAU,MAAK;AACb,UAAM,WAAW,GAAI,KAAD,IAAwB;AAC1C,UAAI,YAAY,IAAI,KAAK,CAAC,GAAN,KAAc,QAAlC,EAA4C;AAC1C,QAAA,aAAa;AACd;;AAED,UAAI,WAAW,IAAI,KAAK,CAAC,GAAN,KAAc,OAAjC,EAA0C;AACxC,QAAA,UAAU,CAAC,OAAO,CAAC,GAAR,EAAD,CAAV;AACD;AACF,KARD;;AAUA,IAAA,MAAM,CAAC,gBAAP,CAAwB,SAAxB,EAAmC,WAAnC;AAEA,WAAO,MAAK;AACV,MAAA,MAAM,CAAC,YAAP,CAAoB,UAApB,CAA+B,QAA/B;AACA,MAAA,MAAM,CAAC,YAAP,CAAoB,UAApB,CAA+B,OAA/B;AACA,MAAA,MAAM,CAAC,mBAAP,CAA2B,SAA3B,EAAsC,WAAtC;AACD,KAJD;AAKD,GAlBD,EAkBG,CAAC,YAAD,EAAe,WAAf,CAlBH;AAmBD,CA7BD","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = require(\"react\");\nexports.default = ({ globalLogin, globalLogout, setSession, removeSession, storage }) => {\n    /**\n     * Global logout/login\n     */\n    react_1.useEffect(() => {\n        const logoutEvent = (event) => {\n            if (globalLogout && event.key === \"logout\") {\n                removeSession();\n            }\n            if (globalLogin && event.key === \"login\") {\n                setSession(storage.get());\n            }\n        };\n        window.addEventListener(\"storage\", logoutEvent);\n        return () => {\n            window.localStorage.removeItem(\"logout\");\n            window.localStorage.removeItem(\"login\");\n            window.removeEventListener(\"storage\", logoutEvent);\n        };\n    }, [globalLogout, globalLogin]);\n};\n//# sourceMappingURL=useGlobalEvents.js.map"]},"metadata":{},"sourceType":"script"}