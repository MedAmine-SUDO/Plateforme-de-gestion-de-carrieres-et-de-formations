{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst react_1 = __importDefault(require(\"react\"));\n\nconst cookies_1 = __importDefault(require(\"./storage/cookies\"));\n\nconst reducer_1 = require(\"./reducer\");\n\nconst useGlobalEvents_1 = __importDefault(require(\"./utils/useGlobalEvents\"));\n\nconst useSessionTimers_1 = __importDefault(require(\"./utils/useSessionTimers\"));\n\nconst defaults = {\n  globalLogin: true,\n  globalLogout: true,\n  jwt: true,\n  refreshInterval: 15 * 60 * 1000,\n  storage: cookies_1.default,\n  isAuthenticated: false,\n  removeSession: () => undefined,\n\n  setSession(value) {\n    this.dispatch({\n      type: \"setSession\",\n      value\n    });\n  },\n\n  clearErrorMessage: () => undefined,\n  setErrorMessage: () => undefined,\n  dispatch: () => undefined,\n  isAuthenticatedGuard: () => false\n};\nexports.UseSessionContext = react_1.default.createContext(defaults);\n\nexports.UseSessionProvider = props => {\n  const _a = Object.assign({}, defaults, props),\n        {\n    children,\n    initialAccessToken,\n    initialIdToken,\n    initialProfile,\n    initialRefreshToken,\n    initialToken\n  } = _a,\n        options = __rest(_a, [\"children\", \"initialAccessToken\", \"initialIdToken\", \"initialProfile\", \"initialRefreshToken\", \"initialToken\"]);\n\n  const {\n    accessToken,\n    idToken,\n    refreshToken,\n    token\n  } = options.storage.get();\n  const initialState = Object.assign({\n    accessToken: initialAccessToken || accessToken,\n    idToken: initialIdToken || idToken,\n    refreshToken: initialRefreshToken || refreshToken,\n    token: initialToken || token,\n    profile: initialProfile,\n    isAuthenticated: false\n  }, options);\n  const [state, dispatch] = react_1.default.useReducer(reducer_1.reducer, initialState, reducer_1.getState);\n  const session = Object.assign({}, state, {\n    dispatch,\n    setSession: value => dispatch({\n      type: \"setSession\",\n      value\n    }),\n    removeSession: () => dispatch({\n      type: \"removeSession\"\n    }),\n    clearErrorMessage: () => dispatch({\n      type: \"setErrorMessage\"\n    }),\n    setErrorMessage: value => {\n      dispatch({\n        type: \"setErrorMessage\",\n        value\n      });\n    },\n\n    isAuthenticatedGuard() {\n      return state.isAuthenticated;\n    }\n\n  });\n  useGlobalEvents_1.default(session);\n  useSessionTimers_1.default(session);\n  return react_1.default.createElement(exports.UseSessionContext.Provider, {\n    value: session\n  }, children);\n};","map":{"version":3,"sources":["../src/context.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst react_1 = __importDefault(require(\"react\"));\nconst cookies_1 = __importDefault(require(\"./storage/cookies\"));\nconst reducer_1 = require(\"./reducer\");\nconst useGlobalEvents_1 = __importDefault(require(\"./utils/useGlobalEvents\"));\nconst useSessionTimers_1 = __importDefault(require(\"./utils/useSessionTimers\"));\nconst defaults = {\n    globalLogin: true,\n    globalLogout: true,\n    jwt: true,\n    refreshInterval: 15 * 60 * 1000,\n    storage: cookies_1.default,\n    isAuthenticated: false,\n    removeSession: () => undefined,\n    setSession(value) {\n        this.dispatch({ type: \"setSession\", value });\n    },\n    clearErrorMessage: () => undefined,\n    setErrorMessage: () => undefined,\n    dispatch: () => undefined,\n    isAuthenticatedGuard: () => false\n};\nexports.UseSessionContext = react_1.default.createContext(defaults);\nexports.UseSessionProvider = (props) => {\n    const _a = Object.assign({}, defaults, props), { children, initialAccessToken, initialIdToken, initialProfile, initialRefreshToken, initialToken } = _a, options = __rest(_a, [\"children\", \"initialAccessToken\", \"initialIdToken\", \"initialProfile\", \"initialRefreshToken\", \"initialToken\"]);\n    const { accessToken, idToken, refreshToken, token } = options.storage.get();\n    const initialState = Object.assign({ accessToken: initialAccessToken || accessToken, idToken: initialIdToken || idToken, refreshToken: initialRefreshToken || refreshToken, token: initialToken || token, profile: initialProfile, isAuthenticated: false }, options);\n    const [state, dispatch] = react_1.default.useReducer(reducer_1.reducer, initialState, reducer_1.getState);\n    const session = Object.assign({}, state, { dispatch, setSession: (value) => dispatch({ type: \"setSession\", value }), removeSession: () => dispatch({ type: \"removeSession\" }), clearErrorMessage: () => dispatch({ type: \"setErrorMessage\" }), setErrorMessage: (value) => {\n            dispatch({ type: \"setErrorMessage\", value });\n        }, isAuthenticatedGuard() {\n            return state.isAuthenticated;\n        } });\n    useGlobalEvents_1.default(session);\n    useSessionTimers_1.default(session);\n    return (react_1.default.createElement(exports.UseSessionContext.Provider, { value: session }, children));\n};\n//# sourceMappingURL=context.js.map"]},"metadata":{},"sourceType":"script"}