{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst useInterval_1 = __importDefault(require(\"./useInterval\"));\n\nexports.default = session => {\n  const {\n    expiration,\n    isAuthenticated,\n    removeSession,\n    refreshFn,\n    refreshInterval,\n    setSession\n  } = session;\n  /***\n   * Remove Session Timer\n   */\n\n  const sessionExpiresIn = expiration && isAuthenticated ? expiration.valueOf() - Date.now() : null;\n  useInterval_1.default(() => removeSession(), sessionExpiresIn);\n  /***\n   * RefreshFn timer\n   */\n\n  let refreshExpiresIn = null;\n\n  if (refreshFn && refreshInterval) {\n    refreshExpiresIn = Math.min(refreshInterval, sessionExpiresIn || Infinity);\n  }\n\n  useInterval_1.default(() => {\n    setSession(refreshFn(session));\n  }, refreshExpiresIn);\n};","map":{"version":3,"sources":["../../src/utils/useSessionTimers.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,MAAA,aAAA,GAAA,eAAA,CAAA,OAAA,CAAA,eAAA,CAAA,CAAA;;AAIA,OAAA,CAAA,OAAA,GAA0B,OAAX,IAA4C;AACzD,QAAM;AACJ,IAAA,UADI;AAEJ,IAAA,eAFI;AAGJ,IAAA,aAHI;AAIJ,IAAA,SAJI;AAKJ,IAAA,eALI;AAMJ,IAAA;AANI,MAOF,OAPJ;AASA;;;;AAGA,QAAM,gBAAgB,GACpB,UAAU,IAAI,eAAd,GAAgC,UAAU,CAAC,OAAX,KAAuB,IAAI,CAAC,GAAL,EAAvD,GAAoE,IADtE;AAGA,EAAA,aAAA,CAAA,OAAA,CAAY,MAAM,aAAa,EAA/B,EAAmC,gBAAnC;AAEA;;;;AAGA,MAAI,gBAAgB,GAAkB,IAAtC;;AAEA,MAAI,SAAS,IAAI,eAAjB,EAAkC;AAChC,IAAA,gBAAgB,GAAG,IAAI,CAAC,GAAL,CAAS,eAAT,EAA0B,gBAAgB,IAAI,QAA9C,CAAnB;AACD;;AAED,EAAA,aAAA,CAAA,OAAA,CAAY,MAAK;AACf,IAAA,UAAU,CAAC,SAAU,CAAC,OAAD,CAAX,CAAV;AACD,GAFD,EAEG,gBAFH;AAGD,CA9BD","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst useInterval_1 = __importDefault(require(\"./useInterval\"));\nexports.default = (session) => {\n    const { expiration, isAuthenticated, removeSession, refreshFn, refreshInterval, setSession } = session;\n    /***\n     * Remove Session Timer\n     */\n    const sessionExpiresIn = expiration && isAuthenticated ? expiration.valueOf() - Date.now() : null;\n    useInterval_1.default(() => removeSession(), sessionExpiresIn);\n    /***\n     * RefreshFn timer\n     */\n    let refreshExpiresIn = null;\n    if (refreshFn && refreshInterval) {\n        refreshExpiresIn = Math.min(refreshInterval, sessionExpiresIn || Infinity);\n    }\n    useInterval_1.default(() => {\n        setSession(refreshFn(session));\n    }, refreshExpiresIn);\n};\n//# sourceMappingURL=useSessionTimers.js.map"]},"metadata":{},"sourceType":"script"}